window.$BV||(function(f,l,c){var j={},p,s={},n={},i={},q={},t={},e=[],m=0;j.Date={now:(function(){var w=Date;var v=w.now;if(typeof v==="function"){return function(){return v.call(w)}}else{return function(){return new w().getTime()}}}())};j.performance={};j.performance.now=(function(){var x=f.performance;var v=x&&x.now;if(typeof v==="function"){return function(){return v.call(x)}}var w=j.Date.now();if(x&&x.timing&&typeof x.timing.navigationStart==="number"){w=x.timing.navigationStart}return function(){return j.Date.now()-w}}());j.performance.mark=(function(){var z=f.performance;var v=z&&z.mark;if(typeof v==="function"){return function(A){v.call(z,A)}}var w=j.performance._marks={};var x=j.performance._timeline=[];var y={navigationStart:1,unloadEventStart:1,unloadEventEnd:1,redirectStart:1,redirectEnd:1,fetchStart:1,domainLookupStart:1,domainLookupEnd:1,connectStart:1,connectEnd:1,secureConnectionStart:1,requestStart:1,responseStart:1,responseEnd:1,domLoading:1,domInteractive:1,domContentLoadedEventStart:1,domContentLoadedEventEnd:1,domComplete:1,loadEventStart:1,loadEventEnd:1};return function(B){if(arguments.length<1){throw new SyntaxError("Cannot set mark without name")}if(B in y){throw new SyntaxError('Cannot set mark with reserved name "'+B+'"')}var A={entryType:"mark",name:B,startTime:j.performance.now(),duration:0};w[B]=w[B]||[];w[B].push(A.startTime);x.push(A)}}());function d(v){var w=[].join.call(arguments," ");if(f.console&&console.log){if(l.all){console.log(w)}else{console.log.apply(console,arguments)}}else{if(f.Debug&&Debug.writeln){Debug.writeln(w)}else{if(f.opera&&opera.postError){opera.postError(w)}}}}j.log=d;function a(x,y){var v,w;if(x.length!==c){for(w=0;w<x.length;w++){y(w,x[w])}}else{for(v in x){y(v,x[v])}}}function r(z){var y,w,x,v;for(v=1;v<arguments.length;v++){if((y=arguments[v])!=null){for(w in y){if((x=y[w])!==c){z[w]=x}}}}return z}function b(v){m+=v;$bv("body").toggleClass("BVDIAjaxWait",m>0)}function g(){}j.Internal=r(g,{each:a,extend:r,exposeGlobals:function(v){a(v,function(w,x){if(/^(bv|BV)/.test(w)){f[w]=x}})},create:function(v){function w(){}w.prototype=v;return new w()},newLatch:function(v){var w=[];return{increment:function(){v++},release:function(){v--;while(v<=0&&w.length){(w.shift())()}},queue:function(x){if(v<=0){x()}else{w.push(x)}}}}});function o(w,v){return function(){return w.apply(null,v.concat([].slice.call(arguments,0)))}}function h(v){var x=[],w=g._require.s.contexts._.specified;a(v,function(B,A){if(!w[A]){var z=q[A],y=i[z||A];if(z){x.push(z)}if(y){a(y,function(D,C){w[C]=true})}}});if(x.length){g._require(x)}return v}function k(v,w){return function(){try{return w&&w.apply(null,arguments)}catch(x){d("Exception in "+v,x)}}}function u(){if($bv().jquery){$bv.ready()}else{p=true}}p=(l.readyState==="complete");if(l.addEventListener){l.addEventListener("DOMContentLoaded",u,false);f.addEventListener("load",u,false)}j.docReady=u;r(g,{require:function(v,w){return g._require(h(v),w&&k("<unknown>",w))},define:function(v,w,x,y){g._require.def(v,h(x),k(v,o(y,w)))},modify:function(x,v,w,y,z){g._require.modify(x,v,h(y),z&&k(v,o(z,w)))},callAjax:function(x,w){var v=[].slice.call(arguments,0);b(1);g._require([x],k(x,function(y){b(-1);if(y){y.apply(null,v)}else{d("Bazaarvoice: error fetching url: "+x)}}),"bvajax")},ajaxCallback:function(v){e.push(v)},onModuleLoaded:function(w,x){if(x==="bvajax"){var v=e.shift();g._require.def(w,[],function(){return v},x)}},defineJQuery:function(v){g.define("jquery.core",[v.noConflict(true)],[],function(w){f.$bv=w;if(p){u()}return w})},getAlternateUrl:function(v){return t[v]},configureLoader:function(w,x,y,v,z){if(g._baseUrl){delete w.baseUrl}else{g._baseUrl=w.baseUrl}g._require(w);g._require(w,null,null,"bvajax");r(t,x);r(s,y);r(n,v);r(g,z)},configureAppLoader:function(z,v,y){var w=v?"-mobile":"";a(["global",z],function(B,C){var A=s[C+w]?C+w:C;if(s[A]){a(s[A],function(E,D){i[E]=D;for(var F=0;F<D.length;F++){if(!q[D[F]]){q[D[F]]=E}}});delete s[A]}});function x(B,C){var A={};
A[C]=q[B]||B;g._require.modify(A)}a(["global",z],function(A,B){if(n[B]){a(n[B],x);delete n[B]}});if(y){a(y,x)}},configureFromWindow:function(v){if(f!=v&&v.$BV&&v.$BV.Internal._baseUrl){g._baseUrl=null;g.configureLoader({baseUrl:v.$BV.Internal._baseUrl})}}});f.$bv=function(v){var x,y,w=[];if(v&&(x=/^\s*#([^, ]+)\s*$/.exec(v))&&(y=l.getElementById(x[1]))){w.push(y)}else{if(v==="body"){w.push(y=l.body)}}w.text=function(){return y&&(y.textContent||y.innerText)};w.attr=function(z,A){if(A===c){return y&&y.getAttribute(z)}else{y&&y.setAttribute(z,""+A);return w}};w.toggleClass=function(z,B){if(y){var A=" "+(y.className||"")+" ";if(B){if(A.indexOf(" "+z+" ")<0){A+=" "+z;y.className=A.replace(/^\s+|\s+$/g,"")}}else{y.className=A.replace(" "+z,"").replace(/^\s+|\s+$/g,"")}}};return w};f.$BV=j}(window,document));
/*
 * @license RequireJS Copyright (c) 2004-2010, The Dojo Foundation All Rights Reserved.
 * Available via the MIT, GPL or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */
(function(n){var h="0.12.0",o={},r,v,g="_",u=[],f,y,x,k,t,j,q,e=/^(complete|loaded)$/,p=!!(typeof window!=="undefined"&&navigator&&document),l=!p&&typeof importScripts!=="undefined",w=Object.prototype.toString,d,c,a;function b(i){return w.call(i)==="[object Function]"}if(typeof n!=="undefined"){if(b(n)){return}else{j=n}}n=function(m,s,i){if(typeof m==="string"&&!b(s)){return n.get(m,s)}return n.def.apply(n,arguments)};c=n;n.def=function(O,G,B,M){var N=null,m,z,E,K,I,s,C,H,A,F,J,D,L;if(typeof O==="string"){if(!n.isArray(G)){M=B;B=G;G=[]}M=M||r.ctxName;m=r.contexts[M];if(m&&(m.defined[O]||m.waiting[O])){return n}}else{if(n.isArray(O)){M=B;B=G;G=O;O=null}else{if(n.isFunction(O)){B=O;M=G;O=null;G=[]}else{N=O;O=null;if(n.isFunction(G)){M=B;B=G;G=[]}M=M||N.context}}}M=M||r.ctxName;m=r.contexts[M];if(!m){z={contextName:M,config:{waitSeconds:7,baseUrl:r.baseUrl||"./",paths:{}},waiting:[],specified:{require:true,exports:true,module:true},loaded:{require:true},urlFetched:{},defined:{},modifiers:{}};z.defined.require=n;m=r.contexts[M]=z}if(N){if(N.baseUrl){if(N.baseUrl.charAt(N.baseUrl.length-1)!=="/"){N.baseUrl+="/"}}J=m.config.paths;n.mixin(m.config,N,true);if(N.paths){for(s in N.paths){if(!(s in o)){J[s]=N.paths[s]}}m.config.paths=J}if(N.priority){c(N.priority);m.config.priorityWait=N.priority}if(N.deps||N.callback){c(N.deps||[],N.callback)}if(!G){return n}}if(G){H=G;G=[];for(L=0;L<H.length;L++){G[L]=n.splitPrefix(H[L],O)}}C=m.waiting.push({name:O,deps:G,callback:B});if(O){m.waiting[O]=C-1;m.specified[O]=true;A=m.modifiers[O];if(A){c(A,M)}}if(O&&B&&!n.isFunction(B)){m.defined[O]=B}if(r.paused||m.config.priorityWait){(r.paused||(r.paused=[])).push([F,O,G,m])}else{n.checkDeps(F,O,G,m);n.checkLoaded(M)}if(O){m.loaded[O]=true}return n};n.mixin=function(s,m,i){for(var z in m){if(!(z in o)&&(!(z in s)||i)){s[z]=m[z]}}return n};n.version=h;r=n.s={ctxName:g,contexts:{},skipAsync:{},isBrowser:p,isPageLoaded:!p,readyCalls:[],doc:p?document:null};n.isBrowser=r.isBrowser;if(p){r.head=document.getElementsByTagName("head")[0];a=document.getElementsByTagName("base")[0];if(a){r.head=a.parentNode}}n.pause=function(){if(!r.paused){r.paused=[]}};n.resume=function(){var z,m,s;if(r.contexts[r.ctxName].config.priorityWait){return}if(r.paused){s=r.paused;delete r.paused;for(z=0;(m=s[z]);z++){n.checkDeps.apply(n,m)}}n.checkLoaded(r.ctxName)};n.checkDeps=function(m,s,C,A){var z,B;if(m){}else{for(z=0;(B=C[z]);z++){if(!A.specified[B.fullName]){A.specified[B.fullName]=true;if(B.prefix){}else{n.load(B.name,A.contextName)}}}}};n.modify=function(B,m,G,F,A){var i,z,C,D=(typeof B==="string"?A:m)||r.ctxName,s=r.contexts[D],E=s.modifiers;if(typeof B==="string"){C=E[B]||(E[B]=[]);if(!C[m]){C.push(m);C[m]=true}n.def(m,G,F,A)}else{for(i in B){if(!(i in o)){z=B[i];C=s.modifiers[i]||(s.modifiers[i]=[]);if(!C[z]){C.push(z);C[z]=true;if(s.specified[i]){c([z],D)}}}}}};n.isArray=function(i){return w.call(i)==="[object Array]"};n.isFunction=b;n.get=function(m,s){if(m==="exports"||m==="module"){throw new Error("require of "+m+" is not allowed.")}s=s||r.ctxName;var i=r.contexts[s].defined[m];if(i===undefined){throw new Error("require: module name '"+m+"' has not been loaded yet for context: "+s)}return i};n.load=function(s,B){var z=r.contexts[B],A=z.urlFetched,m=z.loaded,i;r.isDone=false;if(!m[s]){m[s]=false}i=n.nameToUrl(s,null,B);if(!A[i]){z.startTime=(new Date()).getTime();n.attach(i,B,s);A[i]=true}z.startTime=(new Date()).getTime()};n.jsExtRegExp=/\.js$/;n.normalizeName=function(m,s){var i;if(m.charAt(0)==="."){s=s.split("/");s=s.slice(0,s.length-1);m=s.concat(m.split("/"));for(v=0;(i=m[v]);v++){if(i==="."){m.splice(v,1);v-=1}else{if(i===".."){m.splice(v-1,2);v-=2}}}m=m.join("/")}return m};n.splitPrefix=function(i,m){var s=null;if(m){i=n.normalizeName(i,m)}return{prefix:s,name:i,fullName:s?s+"!"+i:i}
};n.nameToUrl=function(m,z,B){var F,C,D,E,s,A=r.contexts[B].config;if(m.indexOf(":")!==-1||m.charAt(0)==="/"||n.jsExtRegExp.test(m)){return m}else{if(m.charAt(0)==="."){throw new Error("require.nameToUrl does not handle relative module names (ones that start with '.' or '..')")}else{F=A.paths;C=m.split("/");for(D=C.length;D>0;D--){E=C.slice(0,D).join("/");if(F[E]){C.splice(0,D,F[E]);break}}s=C.join("/")+(z||".js");return((s.charAt(0)==="/"||s.match(/^\w+:/))?"":A.baseUrl)+s}}};n.checkLoaded=function(R){var D=r.contexts[R||r.ctxName],G=D.config.waitSeconds*1000,I=G&&(D.startTime+G)<new Date().getTime(),P,B=D.defined,m=D.modifiers,z,O="",M=false,A=false,E,J,N,Q,C,L,K,F,H,s={};if(D.isCheckLoaded){return}if(D.config.priorityWait){J=true;for(Q=0;(N=D.config.priorityWait[Q]);Q++){if(!D.loaded[N]){J=false;break}}if(J){delete D.config.priorityWait;n.resume()}else{return}}D.isCheckLoaded=true;z=D.waiting;P=D.loaded;for(E in P){if(!(E in o)){M=true;if(!P[E]){if(I){O+=E+" "}else{A=true;break}}}}if(!M&&!z.length){D.isCheckLoaded=false;return}if(I&&O){H=new Error("RequireJS load timeout for modules: "+O);H.requireType="timeout";H.requireModules=O}if(A){D.isCheckLoaded=false;if(p||l){setTimeout(function(){n.checkLoaded(R)},50)}return}D.waiting=[];D.loaded={};for(E in m){if(!(E in o)){if(B[E]){n.execModifiers(E,s,z,D)}}}for(Q=0;(C=z[Q]);Q++){n.exec(C,s,z,D)}D.isCheckLoaded=false;if(D.waiting.length){n.checkLoaded(R)}else{if(u.length){}else{r.ctxName=g;r.isDone=true;if(n.callReady){n.callReady()}}}};n.exec=function(s,C,K,m){if(!s){return undefined}var i=s.name,A=s.callback,J=s.deps,D,H,B=m.defined,E,F=[],z,G=false,I;if(i){if(C[i]||i in B){return B[i]}C[i]=true}if(J){for(D=0;(H=J[D]);D++){I=H.name;if(I==="exports"){z=B[i]={};G=true}else{if(I==="module"){z={id:i,uri:i?n.nameToUrl(i,null,m.contextName):undefined}}else{z=I in B?B[I]:(C[I]?undefined:n.exec(K[K[I]],C,K,m))}}F.push(z)}}A=s.callback;if(A&&n.isFunction(A)){E=n.execCb(i,A,F);if(i){if(G){E=B[i]}else{if(i in B){throw new Error(i+" has already been defined")}else{B[i]=E}}}}n.execModifiers(i,C,K,m);return E};n.execCb=function(s,i,m){return i.apply(null,m)};n.execModifiers=function(D,C,E,A){var m=A.modifiers,B=m[D],z,s;if(B){for(s=0;s<B.length;s++){z=B[s];if(z in E){n.exec(E[E[z]],C,E,A)}}delete m[D]}};n.onScriptLoad=function(i){var s=i.currentTarget||i.srcElement,z,m;if(i.type==="load"||i.type==="error"||e.test(s.readyState)){z=s.getAttribute("data-requirecontext");m=s.getAttribute("data-requiremodule");$BV.Internal.onModuleLoaded(m,z);r.contexts[z].loaded[m]=true;n.checkLoaded(z);if(s.removeEventListener){s.removeEventListener("load",n.onScriptLoad,false);s.removeEventListener("error",n.onScriptLoad,false)}else{s.detachEvent("onreadystatechange",n.onScriptLoad)}}};n.attach=function(s,B,m,C,z){var A,i;if(p){C=C||n.onScriptLoad;A=document.createElement("script");A.type=z||"text/javascript";A.charset="utf-8";if(!r.skipAsync[s]){A.setAttribute("async","async")}A.setAttribute("data-requirecontext",B);A.setAttribute("data-requiremodule",m);if(A.addEventListener){A.addEventListener("load",C,false);A.addEventListener("error",C,false)}else{A.attachEvent("onreadystatechange",C)}A.src=s;return a?r.head.insertBefore(A,a):r.head.appendChild(A)}else{if(l){i=r.contexts[B].loaded;i[m]=false;importScripts(s);$BV.Internal.onModuleLoaded(m,B);i[m]=true}}return null};r.baseUrl=j&&j.baseUrl;if(p&&(!r.baseUrl||!r.head)){f=document.getElementsByTagName("script");if(j&&j.baseUrlMatch){x=j.baseUrlMatch}else{x=/(allplugins-|transportD-)?require\.js(\W|$)/i}for(v=f.length-1;v>-1&&(y=f[v]);v--){if(!r.head){r.head=y.parentNode}k=y.src;if(k){t=k.match(x);if(t){r.baseUrl=k.substring(0,t.index);break}}}}if(j){c(j)}$BV.Internal._require=n}($BV.Internal._require));
(function(f,g,a){var b=a._require,h=b.attach;b.attach=function(k,m,j){var l=a.getAlternateUrl(j);if(l&&m==="_"&&!c(j)){i(l,k,m,j)}else{h.apply(null,arguments)}};function i(l,n,m,j){var k=f.jQuery;h(l,m,j,function(r){var q=r.currentTarget||r.srcElement,p=r.type==="error",s=f.jQuery,o="1.6.3";if(!q.readyState||q.readyState==="loaded"||q.readyState==="complete"){if(!p&&j==="jquery.core"&&s&&s!==k&&s.fn&&s.fn.jquery===o){s.noConflict(true);if(!e(f.jQuery,s)){a.defineJQuery(s)}}if(d(j,m)){b.onScriptLoad(r)}else{h(n,m,j)}}})}function c(j){return j==="jquery.core"&&(g.all||(f.Prototype&&/^1\.[0-5]\b/.test(Prototype.Version))||!g.querySelectorAll)}function e(n,j){try{if(!(n&&n.fn&&n.fn.jquery&&n.data)){return false}else{if(n.expando){return n.expando===j.expando}else{var m=g.createElement("div");n.data(m,"bv","bv");var k=m[j.expando]!=null;n.removeData(m,"bv");return k}}}catch(l){return true}}function d(j,l){var k=b.s.contexts[l||b.s.ctxName];return !!(k.defined[j]||k.waiting[j])}})(window,document,$BV.Internal);
$BV.Internal.configureLoader({"baseUrl":"http://esteelauder.ugc.bazaarvoice.com/module/3818-en_us/","waitSeconds":20},{"jquery.core":"http://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js"},{"global":{"cmn/3818redes-en_us/display.pkg":["analyticsAutoTagHooks","analyticsHooks","analyticsVersioning","animationQueueing","browserVersion","contentDispatcher","contentDisplay","cookies","crossDomain","domUtils","dropdown","injection","injection.shared","injection.shared.replacements","jquery.effects.core","json2","magpie","magpieTracking","parseUri","requester","rpcSupport","swfobject","tooltip","underscore","urlEnvironmentManagementService","urlEnvironmentStatus","userTiming","wrapperDivs"]},"rr":{"rr/3818redes-en_us/display.pkg":["alignments","animationOptions","cmn/3818redes/analyticsInternalHooks","cmn/3818redes/injection","cmn/3818redes/uniform","facebookConnect","facebookOpenGraph","feedback","filtering","overlay","photoDisplay","popupDisplay","rr/analyticsHooksRR","rr/analyticsInternalLegacyHooksRR","rr/contentDisplayRR","rr/injection.rr","rr/injection.rr.replacements","rr/photoDisplayRR","rr/videoDisplayRR","socialConnect","tagDisplay","videoDisplay"],"rr/3818redes-en_us/submit.pkg":["apiCore","conditionalBehavior","contentSubmit","deviceFingerprint","dotnet","fieldPicker","fieldTextPrompt","forms","formula","framedContent","hostedAuthentication","iframeSupport","injectionRPC","jquery.rating","jquery.ui.core","jquery.ui.mouse","jquery.ui.slider","jquery.ui.widget","lightbox","photoUpload","ratingControls","rr/reviewSubmissionRR","socialConnectFacebook","submitFrame","submitInjection","tagSubmission","textCounter"]},"rr-mobile":{"rr/3818redes-en_us/mobiledisplay.pkg":["animationOptions","cmn/3818redes/analyticsInternalHooks","cmn/3818redes/injection","cmn/3818redes/uniform","facebookConnect","facebookOpenGraph","feedback","rr/analyticsHooksRR","rr/analyticsInternalLegacyHooksRR","rr/contentDisplayRR","rr/injection.rr","rr/injection.rr.replacements","socialConnect"],"rr/3818redes-en_us/mobilesubmit.pkg":["alignments","apiCore","conditionalBehavior","contentSubmit","dotnet","fieldPicker","forms","formula","framedContent","hostedAuthentication","iframeSupport","injectionRPC","jquery.rating","jquery.ui.core","jquery.ui.mouse","jquery.ui.slider","jquery.ui.widget","lightbox","overlay","ratingControls","rr/reviewSubmissionRR","socialConnectFacebook","submitFrame","tagSubmission","textCounter"]},"sy":{"sy/3818redes-en_us/display.pkg":["alignments","cmn/3818redes/analyticsInternalHooks","cmn/3818redes/injection","cmn/3818redes/uniform","commentDisplay","feedbackStyle1","jquery.rating","jquery.ui.core","jquery.ui.mouse","jquery.ui.slider","jquery.ui.widget","photoDisplay","popupDisplay","ratingControls","sy/analyticsHooksSY","sy/analyticsInternalLegacyHooksSY","sy/contentDisplaySY","sy/feedbackStyle1SY","sy/injection.sy","sy/photoDisplaySY","sy/storySubmitSY"],"sy/3818redes-en_us/submit.pkg":["animationOptions","apiCore","conditionalBehavior","contentSubmit","deviceFingerprint","dotnet","facebookConnect","fieldTextPrompt","forms","formula","framedContent","hostedAuthentication","iframeSupport","injectionRPC","lightbox","overlay","photoUpload","socialConnect","socialConnectFacebook","submitFrame","submitInjection","textCounter"]},"cp":{"cp/3818redes-en_us/display.pkg":["alignments","cmn/3818redes/analyticsInternalHooks","cmn/3818redes/injection","cmn/3818redes/uniform","cp/analyticsHooksCP","cp/photoDisplayCP","cp/tabbingCP","cp/videoDisplayCP","photoDisplay","popupDisplay","qa/photoDisplayQA","qa/videoDisplayQA","rr/photoDisplayRR","rr/videoDisplayRR","sy/photoDisplaySY","sy/videoDisplaySY","videoDisplay"],"cp/3818redes-en_us/submit.pkg":["animationOptions","apiCore","conditionalBehavior","contentSubmit","cp/avatarSelectionCP","dotnet","facebookConnect","forms","formula","framedContent","hostedAuthentication","iframeSupport","injectionRPC","jquery.rating","jquery.ui.core","jquery.ui.mouse","jquery.ui.slider","jquery.ui.widget","lightbox","overlay","ratingControls","socialConnect","socialConnectFacebook","submitFrame","submitInjection"]},"cp-mobile":{"cp/3818redes-en_us/mobiledisplay.pkg":["cmn/3818redes/analyticsInternalHooks","cmn/3818redes/injection","cmn/3818redes/uniform","cp/analyticsHooksCP","cp/tabbingCP"]}},{"global":{"cmn/3818redes/injection":"injection","cmn/3818redes/analyticsInternalHooks":"analyticsHooks","analyticsAutoTagHooks":"analyticsHooks"}},{"_magpieSettings":{"anonymousHostname":"network-a.bazaarvoice.com","trackerHostname":"network.bazaarvoice.com","autoTagEnabled":true,"prrEnv":"prod","vendorName":"magpie","anonymous":false,"brandDomain":"false","defaultClassesOnly":false}});

$BV.Internal.define("apiCore",[window,document,$BV,$BV.Internal,encodeURIComponent],["exports"],function(i,r,o,n,a,u){var j={global:{}},g={global:{}},k="bvJsonpCbk",l={},b,f=[];n.extend(o,{configure:function(y,x){if(typeof y==="object"){n.each(y,o.configure)}else{if(!(y in j)){o.log("Unknown Bazaarvoice configuration scope: "+y)}else{n.extend(j[y],x)}}},getConfiguration:function(y,x){return n.extend({},j.global,j[y],x,{scope:y})},ui:function(y,z,x){if(o.performance&&o.performance.mark){o.performance.mark("bv-render-start")}if(y==="submission_container"){x=z;z=y;y=h(x,"bvappcode",true)}x=n.extend(o.getConfiguration(y,x),{method:z});u.exec(y,z,x)}});function t(x,y){throw"Bazaarvoice: Unknown API method for "+x+": "+y}function s(x){throw"Bazaarvoice: Missing required configuration setting: "+x}function v(x,y){throw"Bazaarvoice: Value not allowed for parameter "+x+": "+y+" "+Object.prototype.toString.call(y)}function w(x){return/string|number|boolean/.test(typeof x)}function m(x){return Object.prototype.toString.call(x)==="[object Array]"}function h(z,y,A){var x=new RegExp("[?&]"+y+"=([^&]+)","i").exec((z&&z.submissionContainerBvParameters)||i.location.search);if(!x&&A){throw"Bazaarvoice: Missing required query parameter: "+y}return x&&decodeURIComponent(x[1])}function q(z,y,x,A){return z.replace(new RegExp("^([^?#]*\\?(?:[^#]*&)?"+y+"=)"+x+"([&#]|$)","i"),"$1"+A+"$2")}function c(z,x,y){if(y.userToken){z=z.replace(/__USERID__|__ALLOWANONYMOUS__/g,y.userToken);if(x){z=q(z,"bvauthenticateuser","true","false")}}if(y.authType){z=z.replace(/__AUTHTYPE__/g,y.authType)}return z}function p(z,y,A,x){if(y!=null){if(typeof y==="object"){n.each(y,function(B,C){e(z+"_"+B,C,A,x)})}else{v(z,y)}}}function e(z,y,A,x){if(y!=null){if(w(y)){x(z,y)}else{if(m(y)){if(A){n.each(y,function(B,C){if(!w(C)){v(z,C)}});x(z,y.join(","))}else{n.each(y,function(B,C){x(z,C)})}}else{v(z,y)}}}}i[k]=function(x){n.ajaxCallback(function(z,y,A){if(A){A(x,y)}})};function d(z,A){var x=i.location,y=/#bvapi_disable=([\w\.\-\*]+)$/.exec(x.hash);y=y||/[?&]bvapi_disable=([\w\.\-\*]+)(?:&|$)/.exec(x.search);y=y||/(?:^|; *)bvapi_disable=([\w\.\-\*]+)(?:;|$)/.exec(r.cookie);return y&&new RegExp("(^|-)("+z+"|\\*)\\.("+A+"|\\*)(-|$)").test(y[1])}n.extend(u,{registerScope:function(x){if(!j[x]){j[x]={}}},register:function(y,z,x){(g[y]=g[y]||{})[z]=x},exec:function(y,z){if(d(y,z)){o.log("Bazaarvoice: Ignoring disabled method "+y+"."+z);return}var x=(g[y]||{})[z]||g.global[z];if(!x){t(y,z)}x.apply(null,arguments)},newLinkHandler:function(x){return function(A,B,z){var y=u.getUrl(x,z,true);if(!z.target){i.location=y}else{if(z.windowFeatures==null){i.open(y,z.target)}else{i.open(y,z.target,z.windowFeatures)}}}},newJsonHandler:function(x){return u.newAjaxHandler(n.extend({query:"callback="+k},x))},newAjaxHandler:function(x){return function(I,y,A,H){n.configureAppLoader(I,A.displayType==="mobile");var C,G,z,E=A;A=n.extend({},A);C=A.injectionLatch=n.newLatch(0);if(A.allowSamePageSubmission!==false&&!b&&h(A,"bvappcode")===I&&h(A,"bvpage")){C.increment();u.inframeSubmission(I,y,E,C.release);A.suppressScroll=true}var D=true;var F=function(){if(!D){D=true;C.release()}};if(x.cssUrl){C.increment();D=false}var B=u.getUrl(x,A);f.push({url:B,config:A});n.callAjax(B,A,H);if(x.cssUrl){z=u.loadCss(x.cssUrl,A,F)}u.prefetchDependencies(A);G=n.newLatch(0);if(x.crossDomainUrl){G.increment();n.require(["crossDomain"],function(J){var K=A.urlBase+u.expandPattern(x.crossDomainUrl,true,A);J.ensureFrame(K,A.urlPathPrefix).await(G.release)})}if(!D){n.require(["requester"],function(J){G.queue(function(){if(!D){J.waitForCss(z,F)}})})}}},getAjaxUiMethodsExecuted:function(){return f},newDispatchHandler:function(z,x,y){return function(B,D,A){var C=A[z];if(C==null){C=x}if(C==null){s(z)}if(!y[C]){v(z,C)}y[C].apply(null,arguments)}},submissionParams:"campaignId,userToken:user,submissionContainerUrl:submissionUrl,submissionContainerUrlParameters:submissionParams,submissionType,productAttributes:productAttribute,submissionSessionParameters:sessionParams",submissionParamAdapters:[function(y,x){x("return",String(y.submissionReturnUrl||i.location));
if(y.onSubmissionReturn){x("innerreturncbk",true)}if(y.internalQueryParams){n.each(y.internalQueryParams,function(z,A){x(z,A)})}},function(y,x){p("productAttribute",y.productAttributes,false,x)}],startSubmission:function(A,B,D,C,x,z,y){u.login(C,x,A,function(E){var F=E.allowSamePageSubmission||!A;if(D&&F){n.callAjax(c(D,false,E),E)}else{if(B&&F){u.embedFrame(c(B,false,E),E)}else{y(c(A,true,E))}}},A,z,y)},inframeSubmission:function(B,D,A,C){var y,x;function z(){if(!y){C();y=true}}x=true;u.submissionContainerHandler(B,D,A,function(){x=false},z);if(x){setTimeout(z,250)}},submissionContainerHandler:function(B,E,z,x,D){if(B==="api"){t(B,E)}n.configureAppLoader(B,z.displayType==="mobile");b=true;var A=h(z,"bvpage",true),C=h(z,"bvauthenticateuser",true);n.extend(z,{displayCode:h(z,"bvdisplaycode",true),contentType:h(z,"bvcontenttype",true),productId:h(z,"bvproductid"),categoryId:h(z,"bvcategoryid")});if(z.canSetPageTitle==null){z.canSetPageTitle=true}var y=function(F){i.location=F};u.login(C==="true"&&!z.userToken,null,null,function(F){if(x){x()}u.embedFrame(c(A,false,F),F,D)},i.location.href,z,y)},configureSubmitFrame:function(x,y){l[x]=y},embedFrame:function(z,y,B){var A=y.displayType==="mobile"?(z.indexOf("mobileembedded")>0?"mobileembedded":"embedded"):"embedded",x;if(y.useRPCInjectedSubmission){x=y.displayType==="mobile"?"mobileembeddedrpc":"embeddedrpc"}else{x=y.displayType==="mobile"?"mobileembeddedframe":"embeddedframe"}z=q(z,"format",A,x);if(y.useRPCInjectedSubmission){n.require(["submitInjection"],function(C){C.embed(z,y,B)})}else{n.require(["submitFrame"],function(C){C.embed(z,y,B)})}u.prefetchDependencies(y,true);u.loadSubmitContainerCss(y)},login:function(D,y,C,x,B,A,z){if(!D){x(A)}else{if(y){n.require(["hostedAuthentication"],function(E){E.openHostedAuthenticationSubmissionFrame(y,A,function(G,F){if(G){x(n.extend({},A,{userToken:G,authType:F}))}else{throw"Bazaarvoice: Hosted authentication didn't pass a userToken"}})})}else{if(A.doLogin){A.doLogin(function(F,E){if(!F){throw"Bazaarvoice: Empty authentication credentials"}x(n.extend({},A,E,{userToken:F}))},q(B,"bvauthenticateuser","true","false"),A)}else{if(C){z(C)}else{throw"Bazaarvoice: User is not authenticated and configuration setting is missing: doLogin"}}}}},loadSubmitContainerCss:function(y){var x=y.displayCode,z;if(y.useRPCInjectedSubmission){z=y.displayType==="mobile"?l[y.scope].mobileSubmissionCssUrl:l[y.scope].submissionCssUrl}else{z=y.displayType==="mobile"?l[y.scope].mobileCssUrl:l[y.scope].cssUrl}if(typeof y.submitContainerDisplayCode!=="undefined"){if(/0000.*/.test(y.submitContainerDisplayCode)){x=y.submitContainerDisplayCode+"."+y.version}}u.loadCss(z,n.extend({},y,{displayCode:x}))},loadSubmissionCss:function(z,x){var y=x.displayType==="mobile"?l[z].mobileSubmissionCssUrl:l[z].submissionCssUrl;u.loadCss(y,x)},loadCss:function(G,z,C){var A,D,B=z.urlBase+u.expandPattern(G,true,z),F=r.getElementsByTagName("link");for(A=0;A<F.length;A++){D=F[A];if(D.rel=="stylesheet"&&D.href&&D.href===B){if(C){C()}return D}}D=r.createElement("link");D.rel="stylesheet";D.type="text/css";D.href=B;if(C){D.onload=C;if(!i.opera&&i.navigator.appName!="Microsoft Internet Explorer"){var y="bvCss"+(z.displayCode||"dc"),x=0,E=function(){var H=r.getElementById(y);if(H&&H.sheet){C()}else{if(x++<10){i.setTimeout(E,50)}}};D.id=y;i.setTimeout(E,50)}}r.getElementsByTagName("head")[0].appendChild(D);return D},prefetchDependencies:function(x,y){n.require((x.displayType==="mobile"?x.prefetchMobileDependencies:x.prefetchDependencies)||[]);if(y){n.require((x.displayType==="mobile"?x.prefetchSubmitMobileDependencies:x.prefetchSubmitDependencies)||[])}},getUrl:function(B,z,y){var x=u.expandPattern(B.url,true,z),A=u.getUrlQuery(B,z);return(y&&z.standaloneUrlBase||z.urlBase)+x+(A.length?(/\?/.test(x)?"&":"?")+A:"")},getUrlQuery:function(A,y){var z=[];function x(C,D,B){if(D!=null){if(!w(D)){if(B){return}else{v(C,D)}}z.push(a(C)+"="+a(D))}}if(A.params){n.each(A.params.split(","),function(C,B){var D=B.split(":");
x(D[1]||D[0],y[D[0]],true)})}if(A.paramAdapters){n.each(A.paramAdapters,function(C,B){B(y,x)})}z.sort();if(A.query){z.push(A.query)}return z.join("&")},expandPattern:function(z,y,x){return z.replace(/\{([^}]+)}/g,function(A,B){if(x[B]==null){s(B)}return y?a(x[B]):x[B]})},paramRegexAdapter:function(x){return function(z,y){n.each(z,function(A,B){if(x.test(A)){y(A,B)}})}},paramSetAdapter:function(x,z,y){return function(B,A){e(z,B[x],y,A)}},paramMultiMapAdapter:function(x,z,y){return function(B,A){p(z,B[x],y,A)}}});u.register("global","submission_container",u.submissionContainerHandler)});
$BV.Internal.define("uiMethodsRR",[window,$BV.Internal],["apiCore"],function(i,j,q){q.registerScope("rr");var b=q.register,h=q.newLinkHandler,s=q.newAjaxHandler,p=q.newDispatchHandler,d="/{displayCode}",m="?format=embedded",f="?format=embeddedhtml",r="?format=bulkembeddedhtml",e="?format=mobileembedded",k="?format=mobileembeddedhtml",g="?format=mobilestandalone";function c(t){return s(j.extend({cssUrl:"/static/{displayCode}/bazaarvoiceMobile.css",crossDomainUrl:d+"/crossdomain.htm"+e},t))}function a(t){return s(j.extend({cssUrl:"/static/{displayCode}/bazaarvoice.css",crossDomainUrl:d+"/crossdomain.htm"+m},t))}function n(t){return s(j.extend({params:q.submissionParams,paramAdapters:q.submissionParamAdapters},t))}q.configureSubmitFrame("rr",{cssUrl:"/static/{displayCode}/bvSubmitContainer.css",mobileCssUrl:"/static/{displayCode}/bvMobileSubmitContainer.css",submissionCssUrl:"/static/{displayCode}/bazaarvoiceSubmitRR.css",mobileSubmissionCssUrl:"/static/{displayCode}/bazaarvoiceMobileSubmitRR.css"});var l="expandContextDataDimensionFilter,expandBadgeGroupFilter,expandTagDimensionFilter,expandOverallRatingFilter,expandRatingDimensionFilter,expandContentSourceFilter",o=[q.paramMultiMapAdapter("contextDataValues","contextdatavalue"),q.paramMultiMapAdapter("badges","badge"),q.paramMultiMapAdapter("tags","tag"),q.paramSetAdapter("rating","rating",true),q.paramMultiMapAdapter("ratings","rating",true),q.paramSetAdapter("contentSource","contentsource"),q.paramMultiMapAdapter("productAttributes","productattribute"),q.referralAdapter?q.referralAdapter():q.paramSetAdapter("keywords","keywords",true)];b("rr","show_summary",p("displayType","",{"":a({url:d+"/{productId}/ratings.djs"+f,paramAdapters:[q.paramMultiMapAdapter("productAttributes","productattribute")]}),mobile:c({url:d+"/{productId}/ratings.djs"+k,paramAdapters:[q.paramMultiMapAdapter("productAttributes","productattribute")]})}));b("rr","show_reviews",p("displayType","",{"":a({url:d+"/{productId}/reviews.djs"+f,params:"reviewId,page,num,sort,dir,sourceName,scrollToTop,suppressScroll,"+l+",commentId,showComments,hideComments,commentPage,commentNum,ugcPageContainerUrl",paramAdapters:o}),bulk:a({url:d+"/{productId}/reviews.djs"+r,params:"reviewId,page,num,sort,dir,sourceName,scrollToTop,suppressScroll,"+l+",commentId,showComments,hideComments,commentPage,commentNum,ugcPageContainerUrl",paramAdapters:o}),mobile:c({url:d+"/{productId}/reviews.djs"+k,params:"reviewId,page,num,sort,dir,sourceName,scrollToTop,suppressScroll,"+l+",commentId,showComments,hideComments,commentPage,commentNum",paramAdapters:o})}));b("rr","show_widgets",a({url:d+"/{productId}/widgets.djs"+f,paramAdapters:[q.paramMultiMapAdapter("productAttributes","productattribute")]}));b("rr","show_memory",a({url:d+"/homepage.djs"+f+"&s=memory",params:"productId"}));b("rr","show_product_list",a({url:d+"/homepage.djs"+f+"&s=productlist",params:"categoryId,productId"}));b("rr","submit_review",p("displayType","",{"":p("chooseProduct",false,{"true":n({url:d+"/writereview.djs"+f}),"false":n({url:d+"/{productId}/writereview.djs"+f})}),mobile:p("chooseProduct",false,{"true":n({url:d+"/writereview.djs"+k}),"false":n({url:d+"/{productId}/writereview.djs"+k})})}));b("rr","submit_comment",n({url:d+"/{productId}/review/{reviewId}/writecomment.djs"+f}));b("rr","goto_home",p("displayType","",{"":p("subjectType","all",{all:h({url:d+"/allreviews.htm"}),category:h({url:d+"/{categoryId}/category.htm"})}),mobile:p("subjectType","all",{all:h({url:d+"/allreviews.htm"+g}),category:h({url:d+"/{categoryId}/category.htm"+g})})}));b("rr","goto_reviews",p("displayType","",{"":h({url:d+"/{productId}/reviews.htm",params:"page,num,sort,dir"}),mobile:h({url:d+"/{productId}/reviews.htm"+g,params:"page,num,sort,dir"})}));b("rr","goto_syndicated_reviews",h({url:d+"/{productId}/syndicatedreviews.htm",params:"page,num,sort,dir"}));b("rr","goto_reviews_showcase",h({url:d+"/{productId}/reviews.htm?format=brandvoice",params:"page,num,sort,dir"}))});
$BV.Internal.define("uiMethodsSY",[window,$BV.Internal],["apiCore"],function(i,d,c){c.registerScope("sy");var n=c.register,g=c.newLinkHandler,o=c.newAjaxHandler,k=c.newDispatchHandler,j="/stories/{displayCode}",l="?format=embedded",p="?format=embeddedhtml",b="?format=bulkembeddedhtml";function m(q){return o(d.extend({cssUrl:j+"/static/bazaarvoiceSY.css",crossDomainUrl:j+"/crossdomain.htm"+l},q))}function a(q){return o(d.extend({params:c.submissionParams,paramAdapters:c.submissionParamAdapters},q))}function e(r,q,s){return k("subjectType",null,{product:q(d.extend({url:j+"/product/{productId}"+r},s)),category:q(d.extend({url:j+"/category/{categoryId}"+r},s))})}c.configureSubmitFrame("sy",{cssUrl:j+"/static/bvSubmitContainer.css",mobileCssUrl:j+"/static/bvMobileSubmitContainer.css",submissionCssUrl:j+"/static/bazaarvoiceSubmitSY.css"});var f="expandContextDataDimensionFilter,expandBadgeGroupFilter,expandTagDimensionFilter",h=[c.paramMultiMapAdapter("contextDataValues","contextdatavalue"),c.paramMultiMapAdapter("badges","badge"),c.paramMultiMapAdapter("tags","tag"),c.paramMultiMapAdapter("productAttributes","productattribute")];n("sy","show_summary",e("/statisticssummary.djs"+p,m,{paramAdapters:[c.paramMultiMapAdapter("productAttributes","productattribute")]}));n("sy","show_stories",k("displayType","",{"":e("/stories.djs"+p,m,{params:"storyId,page,num,sort,dir,scrollToTop,suppressScroll,"+f+",commentId,showComments,hideComments,commentPage,commentNum,ugcPageContainerUrl",paramAdapters:h}),bulk:e("/stories.djs"+b,m,{params:"storyId,page,num,sort,dir,scrollToTop,suppressScroll,"+f+",commentId,showComments,hideComments,commentPage,commentNum,ugcPageContainerUrl",paramAdapters:h})}));n("sy","show_grid",e("/storiesgrid.djs"+p,m,{params:"page,sort,dir,scrollToTop,"+f,paramAdapters:h}));n("sy","show_widgets",e("/widgets.djs"+p,m,{paramAdapters:[c.paramMultiMapAdapter("productAttributes","productattribute")]}));n("sy","show_home",k("subjectType","all",{all:m({url:j+"/allstoriessubgrid.djs"+p,params:"scrollToTop",paramAdapters:[c.paramMultiMapAdapter("productAttributes","productattribute")]}),category:m({url:j+"/{categoryId}/storiessubgrid.djs"+p,params:"scrollToTop",paramAdapters:[c.paramMultiMapAdapter("productAttributes","productattribute")]})}));n("sy","submit_story",e("/writestory.djs"+p,a,{}));n("sy","submit_comment",e("/story/{storyId}/writecomment.djs"+p,a,{}));n("sy","goto_stories",e("/stories.htm",g,{params:"page,sort,dir"}))});
$BV.Internal.define("uiMethodsCP",[window,$BV.Internal],["apiCore"],function(f,c,b){b.registerScope("cp");var l=b.register,d=b.newLinkHandler,m=b.newAjaxHandler,h=b.newDispatchHandler,g="/profiles/{displayCode}",i="?format=embedded",n="?format=embeddedhtml",k="?format=mobilestandalone";function j(o){return m(c.extend({cssUrl:g+"/static/bazaarvoiceCP.css",crossDomainUrl:g+"/crossdomain.htm"+i},o))}function a(o){return m(c.extend({params:b.submissionParams,paramAdapters:b.submissionParamAdapters},o))}b.configureSubmitFrame("cp",{cssUrl:g+"/static/bvSubmitContainer.css",mobileCssUrl:g+"/static/bvMobileSubmitContainer.css",submissionCssUrl:g+"/static/bazaarvoiceSubmitCP.css",mobileSubmissionCssUrl:g+"/static/bazaarvoiceMobileSubmitCP.css"});var e=[b.paramMultiMapAdapter("productAttributes","productattribute")];l("cp","show_profile",j({url:g+"/{profileId}/profile.djs"+n,paramAdapters:e}));l("cp","submit_profile",a({url:g+"/editprofile.djs"+n}));l("cp","goto_profile",h("displayType","",{"":d({url:g+"/{profileId}/profile.htm"}),mobile:d({url:g+"/{profileId}/profile.htm"+k})}))});
$BV.configure({"global":{"version":"5.6","displayCode":"3818-en_us","clientName":"EsteeLauder","urlBase":"http://esteelauder.ugc.bazaarvoice.com","urlPathPrefix":"","allowedDomains":[".c4.prr-display.prod.us-east-1.nexus.bazaarvoice.com",".esteelauder.ca",".esteelauder.com",".esteelauder.ugc.bazaarvoice.com"],"submissionUI":"STANDALONE","submissionLightboxCloseLinkAlt":"Close","submissionLightboxCloseLinkText":"Close"},"rr":{"prefetchDependencies":["jquery.core","cmn/3818redes-en_us/display.pkg","rr/3818redes-en_us/display.pkg"],"prefetchMobileDependencies":["jquery.core","cmn/3818redes-en_us/display.pkg","rr/3818redes-en_us/mobiledisplay.pkg"],"prefetchSubmitDependencies":["rr/3818redes-en_us/submit.pkg"],"prefetchSubmitMobileDependencies":["rr/3818redes-en_us/mobilesubmit.pkg"],"standaloneUrlBase":"http://reviews.esteelauder.com","useRPCInjectedSubmission":true},"sy":{"prefetchDependencies":["jquery.core","cmn/3818redes-en_us/display.pkg","sy/3818redes-en_us/display.pkg"],"prefetchSubmitDependencies":["sy/3818redes-en_us/submit.pkg"],"standaloneUrlBase":"http://reviews.esteelauder.com","useRPCInjectedSubmission":true},"cp":{"prefetchDependencies":["jquery.core","cmn/3818redes-en_us/display.pkg","cp/3818redes-en_us/display.pkg"],"prefetchMobileDependencies":["jquery.core","cmn/3818redes-en_us/display.pkg","cp/3818redes-en_us/mobiledisplay.pkg"],"prefetchSubmitDependencies":["cp/3818redes-en_us/submit.pkg"],"standaloneUrlBase":"http://reviews.esteelauder.com","useRPCInjectedSubmission":true}});

$BV.Internal.define("bvscout",[window,$BV,$BV.Internal],[],function(g,a,c){if(a&&a.getConfiguration){var b=a.getConfiguration();var e=b.clientName;var d=b.displayCode;if(e&&d){c._bvScoutEventQueue=[];a.setUser=function h(i){a.Internal._bvScoutEventQueue.push({method:"setUser",shopperId:i})};a.getUser=function f(i,j){a.Internal._bvScoutEventQueue.push({method:"getUser",shopperId:i,callback:j})};c.require(["https://apps.nexus.bazaarvoice.com/"+e+"/"+d+"/bv.js"])}}});
;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t,e){function i(){return++n}function s(t){return t.hash.length>1&&decodeURIComponent(t.href.replace(a,""))===decodeURIComponent(location.href.replace(a,""))}var n=0,a=/#.*$/;t.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var i=this.options.active,s=this.options.collapsible,n=location.hash.substring(1);return null===i&&(n&&this.tabs.each(function(s,a){return t(a).attr("aria-controls")===n?(i=s,!1):e}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=this.tabs.length?0:!1)),i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),-1===i&&(i=s?!1:0)),!s&&i===!1&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(i){var s=t(this.document[0].activeElement).closest("li"),n=this.tabs.index(s),a=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:a=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(n),e;case t.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(n===this.options.active?!1:n),e;default:return}i.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,a),i.ctrlKey||(s.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):e},_findNextTab:function(e,i){function s(){return e>n&&(e=0),0>e&&(e=n),e}for(var n=this.tabs.length-1;-1!==t.inArray(s(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,i){return"active"===t?(this._activate(i),e):"disabled"===t?(this._setupDisabled(i),e):(this._super(t,i),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",i),i||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(i),"heightStyle"===t&&this._setupHeightStyle(i),e)},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,n){var a,o,r,h=t(n).uniqueId().attr("id"),l=t(n).closest("li"),u=l.attr("aria-controls");s(n)?(a=n.hash,o=e.element.find(e._sanitizeSelector(a))):(r=e._tabId(l),a="#"+r,o=e.element.find(a),o.length||(o=e._createPanel(r),o.insertAfter(e.panels[i-1]||e.tablist)),o.attr("aria-live","polite")),o.length&&(e.panels=e.panels.add(o)),u&&l.data("ui-tabs-aria-controls",u),l.attr({"aria-controls":a.substring(1),"aria-labelledby":h}),o.attr("aria-labelledby",h)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,s=0;i=this.tabs[s];s++)e===!0||-1!==t.inArray(s,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,s=this.element.parent();"fill"===e?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,h=r?t():this._getPanelForTab(a),l=s.length?this._getPanelForTab(s):t(),u={oldTab:s,oldPanel:l,newTab:r?t():a,newPanel:h};e.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",e,u)===!1||(i.active=r?!1:this.tabs.index(a),this.active=o?t():a,this.xhr&&this.xhr.abort(),l.length||h.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(a),e),this._toggle(e,u))},_toggle:function(e,i){function s(){a.running=!1,a._trigger("activate",e,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,s):(o.show(),s())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,s=this._findActive(e);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var s=this.options.disabled;s!==!1&&(i===e?s=!1:(i=this._getIndex(i),s=t.isArray(s)?t.map(s,function(t){return t!==i?t:null}):t.map(this.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(s))},disable:function(i){var s=this.options.disabled;if(s!==!0){if(i===e)s=!0;else{if(i=this._getIndex(i),-1!==t.inArray(i,s))return;s=t.isArray(s)?t.merge([i],s).sort():[i]}this._setupDisabled(s)}},load:function(e,i){e=this._getIndex(e);var n=this,a=this.tabs.eq(e),o=a.find(".ui-tabs-anchor"),r=this._getPanelForTab(a),h={tab:a,panel:r};s(o[0])||(this.xhr=t.ajax(this._ajaxSettings(o,i,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(a.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){r.html(t),n._trigger("load",i,h)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&n.panels.stop(!1,!0),a.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr("href"),beforeSend:function(e,a){return n._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:a},s))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})})(jQuery);;
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.9
 *
 * Requires: jQuery 1.2.2+
 */

(function (factory) {
    if ( typeof define === 'function' && define.amd ) {
        // AMD. Register as an anonymous module.
        define(['jquery'], factory);
    } else if (typeof exports === 'object') {
        // Node/CommonJS style for Browserify
        module.exports = factory;
    } else {
        // Browser globals
        factory(jQuery);
    }
}(function ($) {

    var toFix  = ['wheel', 'mousewheel', 'DOMMouseScroll', 'MozMousePixelScroll'],
        toBind = ( 'onwheel' in document || document.documentMode >= 9 ) ?
                    ['wheel'] : ['mousewheel', 'DomMouseScroll', 'MozMousePixelScroll'],
        slice  = Array.prototype.slice,
        nullLowestDeltaTimeout, lowestDelta;

    if ( $.event.fixHooks ) {
        for ( var i = toFix.length; i; ) {
            $.event.fixHooks[ toFix[--i] ] = $.event.mouseHooks;
        }
    }

    var special = $.event.special.mousewheel = {
        version: '3.1.9',

        setup: function() {
            if ( this.addEventListener ) {
                for ( var i = toBind.length; i; ) {
                    this.addEventListener( toBind[--i], handler, false );
                }
            } else {
                this.onmousewheel = handler;
            }
            // Store the line height and page height for this particular element
            $.data(this, 'mousewheel-line-height', special.getLineHeight(this));
            $.data(this, 'mousewheel-page-height', special.getPageHeight(this));
        },

        teardown: function() {
            if ( this.removeEventListener ) {
                for ( var i = toBind.length; i; ) {
                    this.removeEventListener( toBind[--i], handler, false );
                }
            } else {
                this.onmousewheel = null;
            }
        },

        getLineHeight: function(elem) {
            return parseInt($(elem)['offsetParent' in $.fn ? 'offsetParent' : 'parent']().css('fontSize'), 10);
        },

        getPageHeight: function(elem) {
            return $(elem).height();
        },

        settings: {
            adjustOldDeltas: true
        }
    };

    $.fn.extend({
        mousewheel: function(fn) {
            return fn ? this.bind('mousewheel', fn) : this.trigger('mousewheel');
        },

        unmousewheel: function(fn) {
            return this.unbind('mousewheel', fn);
        }
    });


    function handler(event) {
        var orgEvent   = event || window.event,
            args       = slice.call(arguments, 1),
            delta      = 0,
            deltaX     = 0,
            deltaY     = 0,
            absDelta   = 0;
        event = $.event.fix(orgEvent);
        event.type = 'mousewheel';

        // Old school scrollwheel delta
        if ( 'detail'      in orgEvent ) { deltaY = orgEvent.detail * -1;      }
        if ( 'wheelDelta'  in orgEvent ) { deltaY = orgEvent.wheelDelta;       }
        if ( 'wheelDeltaY' in orgEvent ) { deltaY = orgEvent.wheelDeltaY;      }
        if ( 'wheelDeltaX' in orgEvent ) { deltaX = orgEvent.wheelDeltaX * -1; }

        // Firefox < 17 horizontal scrolling related to DOMMouseScroll event
        if ( 'axis' in orgEvent && orgEvent.axis === orgEvent.HORIZONTAL_AXIS ) {
            deltaX = deltaY * -1;
            deltaY = 0;
        }

        // Set delta to be deltaY or deltaX if deltaY is 0 for backwards compatabilitiy
        delta = deltaY === 0 ? deltaX : deltaY;

        // New school wheel delta (wheel event)
        if ( 'deltaY' in orgEvent ) {
            deltaY = orgEvent.deltaY * -1;
            delta  = deltaY;
        }
        if ( 'deltaX' in orgEvent ) {
            deltaX = orgEvent.deltaX;
            if ( deltaY === 0 ) { delta  = deltaX * -1; }
        }

        // No change actually happened, no reason to go any further
        if ( deltaY === 0 && deltaX === 0 ) { return; }

        // Need to convert lines and pages to pixels if we aren't already in pixels
        // There are three delta modes:
        //   * deltaMode 0 is by pixels, nothing to do
        //   * deltaMode 1 is by lines
        //   * deltaMode 2 is by pages
        if ( orgEvent.deltaMode === 1 ) {
            var lineHeight = $.data(this, 'mousewheel-line-height');
            delta  *= lineHeight;
            deltaY *= lineHeight;
            deltaX *= lineHeight;
        } else if ( orgEvent.deltaMode === 2 ) {
            var pageHeight = $.data(this, 'mousewheel-page-height');
            delta  *= pageHeight;
            deltaY *= pageHeight;
            deltaX *= pageHeight;
        }

        // Store lowest absolute delta to normalize the delta values
        absDelta = Math.max( Math.abs(deltaY), Math.abs(deltaX) );

        if ( !lowestDelta || absDelta < lowestDelta ) {
            lowestDelta = absDelta;

            // Adjust older deltas if necessary
            if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {
                lowestDelta /= 40;
            }
        }

        // Adjust older deltas if necessary
        if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {
            // Divide all the things by 40!
            delta  /= 40;
            deltaX /= 40;
            deltaY /= 40;
        }

        // Get a whole, normalized value for the deltas
        delta  = Math[ delta  >= 1 ? 'floor' : 'ceil' ](delta  / lowestDelta);
        deltaX = Math[ deltaX >= 1 ? 'floor' : 'ceil' ](deltaX / lowestDelta);
        deltaY = Math[ deltaY >= 1 ? 'floor' : 'ceil' ](deltaY / lowestDelta);

        // Add information to the event object
        event.deltaX = deltaX;
        event.deltaY = deltaY;
        event.deltaFactor = lowestDelta;
        // Go ahead and set deltaMode to 0 since we converted to pixels
        // Although this is a little odd since we overwrite the deltaX/Y
        // properties with normalized deltas.
        event.deltaMode = 0;

        // Add event and delta to the front of the arguments
        args.unshift(event, delta, deltaX, deltaY);

        // Clearout lowestDelta after sometime to better
        // handle multiple device types that give different
        // a different lowestDelta
        // Ex: trackpad = 3 and mouse wheel = 120
        if (nullLowestDeltaTimeout) { clearTimeout(nullLowestDeltaTimeout); }
        nullLowestDeltaTimeout = setTimeout(nullLowestDelta, 200);

        return ($.event.dispatch || $.event.handle).apply(this, args);
    }

    function nullLowestDelta() {
        lowestDelta = null;
    }

    function shouldAdjustOldDeltas(orgEvent, absDelta) {
        // If this is an older event and the delta is divisable by 120,
        // then we are assuming that the browser is treating this as an
        // older mouse wheel event and that we should divide the deltas
        // by 40 to try and get a more usable deltaFactor.
        // Side note, this actually impacts the reported scroll distance
        // in older browsers and can cause scrolling to be slower than native.
        // Turn this off by setting $.event.special.mousewheel.settings.adjustOldDeltas to false.
        return special.settings.adjustOldDeltas && orgEvent.type === 'mousewheel' && absDelta % 120 === 0;
    }

}));

;
/**
 * @author trixta
 * @version 1.2
 */
(function($){

var mwheelI = {
			pos: [-260, -260]
		},
	minDif 	= 3,
	doc 	= document,
	root 	= doc.documentElement,
	body 	= doc.body,
	longDelay, shortDelay
;

function unsetPos(){
	if(this === mwheelI.elem){
		mwheelI.pos = [-260, -260];
		mwheelI.elem = false;
		minDif = 3;
	}
}

$.event.special.mwheelIntent = {
	setup: function(){
		var jElm = $(this).bind('mousewheel', $.event.special.mwheelIntent.handler);
		if( this !== doc && this !== root && this !== body ){
			jElm.bind('mouseleave', unsetPos);
		}
		jElm = null;
        return true;
    },
	teardown: function(){
        $(this)
			.unbind('mousewheel', $.event.special.mwheelIntent.handler)
			.unbind('mouseleave', unsetPos)
		;
        return true;
    },
    handler: function(e, d){
		var pos = [e.clientX, e.clientY];
		if( this === mwheelI.elem || Math.abs(mwheelI.pos[0] - pos[0]) > minDif || Math.abs(mwheelI.pos[1] - pos[1]) > minDif ){
            mwheelI.elem = this;
			mwheelI.pos = pos;
			minDif = 250;
			
			clearTimeout(shortDelay);
			shortDelay = setTimeout(function(){
				minDif = 10;
			}, 200);
			clearTimeout(longDelay);
			longDelay = setTimeout(function(){
				minDif = 3;
			}, 1500);
			e = $.extend({}, e, {type: 'mwheelIntent'});
            return ($.event.dispatch || $.event.handle).apply(this, arguments);
		}
    }
};
$.fn.extend({
	mwheelIntent: function(fn) {
		return fn ? this.bind("mwheelIntent", fn) : this.trigger("mwheelIntent");
	},
	
	unmwheelIntent: function(fn) {
		return this.unbind("mwheelIntent", fn);
	}
});

$(function(){
	body = doc.body;
	//assume that document is always scrollable, doesn't hurt if not
	$(doc).bind('mwheelIntent.mwheelIntentDefault', $.noop);
});
})(jQuery);
;
/*!
 * jScrollPane - v2.0.21 - 2015-02-24
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2014 Kelvin Luck
 * Dual licensed under the MIT or GPL licenses.
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){a.fn.jScrollPane=function(b){function c(b,c){function d(c){var f,h,j,k,l,o,p=!1,q=!1;if(N=c,void 0===O)l=b.scrollTop(),o=b.scrollLeft(),b.css({overflow:"hidden",padding:0}),P=b.innerWidth()+rb,Q=b.innerHeight(),b.width(P),O=a('<div class="jspPane" />').css("padding",qb).append(b.children()),R=a('<div class="jspContainer" />').css({width:P+"px",height:Q+"px"}).append(O).appendTo(b);else{if(b.css("width",""),p=N.stickToBottom&&A(),q=N.stickToRight&&B(),k=b.innerWidth()+rb!=P||b.outerHeight()!=Q,k&&(P=b.innerWidth()+rb,Q=b.innerHeight(),R.css({width:P+"px",height:Q+"px"})),!k&&sb==S&&O.outerHeight()==T)return void b.width(P);sb=S,O.css("width",""),b.width(P),R.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}O.css("overflow","auto"),S=c.contentWidth?c.contentWidth:O[0].scrollWidth,T=O[0].scrollHeight,O.css("overflow",""),U=S/P,V=T/Q,W=V>1,X=U>1,X||W?(b.addClass("jspScrollable"),f=N.maintainPosition&&($||bb),f&&(h=y(),j=z()),e(),g(),i(),f&&(w(q?S-P:h,!1),v(p?T-Q:j,!1)),F(),C(),L(),N.enableKeyboardNavigation&&H(),N.clickOnTrack&&m(),J(),N.hijackInternalLinks&&K()):(b.removeClass("jspScrollable"),O.css({top:0,left:0,width:R.width()-rb}),D(),G(),I(),n()),N.autoReinitialise&&!pb?pb=setInterval(function(){d(N)},N.autoReinitialiseDelay):!N.autoReinitialise&&pb&&clearInterval(pb),l&&b.scrollTop(0)&&v(l,!1),o&&b.scrollLeft(0)&&w(o,!1),b.trigger("jsp-initialised",[X||W])}function e(){W&&(R.append(a('<div class="jspVerticalBar" />').append(a('<div class="jspCap jspCapTop" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragTop" />'),a('<div class="jspDragBottom" />'))),a('<div class="jspCap jspCapBottom" />'))),cb=R.find(">.jspVerticalBar"),db=cb.find(">.jspTrack"),Y=db.find(">.jspDrag"),N.showArrows&&(hb=a('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",k(0,-1)).bind("click.jsp",E),ib=a('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",k(0,1)).bind("click.jsp",E),N.arrowScrollOnHover&&(hb.bind("mouseover.jsp",k(0,-1,hb)),ib.bind("mouseover.jsp",k(0,1,ib))),j(db,N.verticalArrowPositions,hb,ib)),fb=Q,R.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){fb-=a(this).outerHeight()}),Y.hover(function(){Y.addClass("jspHover")},function(){Y.removeClass("jspHover")}).bind("mousedown.jsp",function(b){a("html").bind("dragstart.jsp selectstart.jsp",E),Y.addClass("jspActive");var c=b.pageY-Y.position().top;return a("html").bind("mousemove.jsp",function(a){p(a.pageY-c,!1)}).bind("mouseup.jsp mouseleave.jsp",o),!1}),f())}function f(){db.height(fb+"px"),$=0,eb=N.verticalGutter+db.outerWidth(),O.width(P-eb-rb);try{0===cb.position().left&&O.css("margin-left",eb+"px")}catch(a){}}function g(){X&&(R.append(a('<div class="jspHorizontalBar" />').append(a('<div class="jspCap jspCapLeft" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragLeft" />'),a('<div class="jspDragRight" />'))),a('<div class="jspCap jspCapRight" />'))),jb=R.find(">.jspHorizontalBar"),kb=jb.find(">.jspTrack"),_=kb.find(">.jspDrag"),N.showArrows&&(nb=a('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",k(-1,0)).bind("click.jsp",E),ob=a('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",k(1,0)).bind("click.jsp",E),N.arrowScrollOnHover&&(nb.bind("mouseover.jsp",k(-1,0,nb)),ob.bind("mouseover.jsp",k(1,0,ob))),j(kb,N.horizontalArrowPositions,nb,ob)),_.hover(function(){_.addClass("jspHover")},function(){_.removeClass("jspHover")}).bind("mousedown.jsp",function(b){a("html").bind("dragstart.jsp selectstart.jsp",E),_.addClass("jspActive");var c=b.pageX-_.position().left;return a("html").bind("mousemove.jsp",function(a){r(a.pageX-c,!1)}).bind("mouseup.jsp mouseleave.jsp",o),!1}),lb=R.innerWidth(),h())}function h(){R.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){lb-=a(this).outerWidth()}),kb.width(lb+"px"),bb=0}function i(){if(X&&W){var b=kb.outerHeight(),c=db.outerWidth();fb-=b,a(jb).find(">.jspCap:visible,>.jspArrow").each(function(){lb+=a(this).outerWidth()}),lb-=c,Q-=c,P-=b,kb.parent().append(a('<div class="jspCorner" />').css("width",b+"px")),f(),h()}X&&O.width(R.outerWidth()-rb+"px"),T=O.outerHeight(),V=T/Q,X&&(mb=Math.ceil(1/U*lb),mb>N.horizontalDragMaxWidth?mb=N.horizontalDragMaxWidth:mb<N.horizontalDragMinWidth&&(mb=N.horizontalDragMinWidth),_.width(mb+"px"),ab=lb-mb,s(bb)),W&&(gb=Math.ceil(1/V*fb),gb>N.verticalDragMaxHeight?gb=N.verticalDragMaxHeight:gb<N.verticalDragMinHeight&&(gb=N.verticalDragMinHeight),Y.height(gb+"px"),Z=fb-gb,q($))}function j(a,b,c,d){var e,f="before",g="after";"os"==b&&(b=/Mac/.test(navigator.platform)?"after":"split"),b==f?g=b:b==g&&(f=b,e=c,c=d,d=e),a[f](c)[g](d)}function k(a,b,c){return function(){return l(a,b,this,c),this.blur(),!1}}function l(b,c,d,e){d=a(d).addClass("jspActive");var f,g,h=!0,i=function(){0!==b&&tb.scrollByX(b*N.arrowButtonSpeed),0!==c&&tb.scrollByY(c*N.arrowButtonSpeed),g=setTimeout(i,h?N.initialDelay:N.arrowRepeatFreq),h=!1};i(),f=e?"mouseout.jsp":"mouseup.jsp",e=e||a("html"),e.bind(f,function(){d.removeClass("jspActive"),g&&clearTimeout(g),g=null,e.unbind(f)})}function m(){n(),W&&db.bind("mousedown.jsp",function(b){if(void 0===b.originalTarget||b.originalTarget==b.currentTarget){var c,d=a(this),e=d.offset(),f=b.pageY-e.top-$,g=!0,h=function(){var a=d.offset(),e=b.pageY-a.top-gb/2,j=Q*N.scrollPagePercent,k=Z*j/(T-Q);if(0>f)$-k>e?tb.scrollByY(-j):p(e);else{if(!(f>0))return void i();e>$+k?tb.scrollByY(j):p(e)}c=setTimeout(h,g?N.initialDelay:N.trackClickRepeatFreq),g=!1},i=function(){c&&clearTimeout(c),c=null,a(document).unbind("mouseup.jsp",i)};return h(),a(document).bind("mouseup.jsp",i),!1}}),X&&kb.bind("mousedown.jsp",function(b){if(void 0===b.originalTarget||b.originalTarget==b.currentTarget){var c,d=a(this),e=d.offset(),f=b.pageX-e.left-bb,g=!0,h=function(){var a=d.offset(),e=b.pageX-a.left-mb/2,j=P*N.scrollPagePercent,k=ab*j/(S-P);if(0>f)bb-k>e?tb.scrollByX(-j):r(e);else{if(!(f>0))return void i();e>bb+k?tb.scrollByX(j):r(e)}c=setTimeout(h,g?N.initialDelay:N.trackClickRepeatFreq),g=!1},i=function(){c&&clearTimeout(c),c=null,a(document).unbind("mouseup.jsp",i)};return h(),a(document).bind("mouseup.jsp",i),!1}})}function n(){kb&&kb.unbind("mousedown.jsp"),db&&db.unbind("mousedown.jsp")}function o(){a("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),Y&&Y.removeClass("jspActive"),_&&_.removeClass("jspActive")}function p(a,b){W&&(0>a?a=0:a>Z&&(a=Z),void 0===b&&(b=N.animateScroll),b?tb.animate(Y,"top",a,q):(Y.css("top",a),q(a)))}function q(a){void 0===a&&(a=Y.position().top),R.scrollTop(0),$=a||0;var c=0===$,d=$==Z,e=a/Z,f=-e*(T-Q);(ub!=c||wb!=d)&&(ub=c,wb=d,b.trigger("jsp-arrow-change",[ub,wb,vb,xb])),t(c,d),O.css("top",f),b.trigger("jsp-scroll-y",[-f,c,d]).trigger("scroll")}function r(a,b){X&&(0>a?a=0:a>ab&&(a=ab),void 0===b&&(b=N.animateScroll),b?tb.animate(_,"left",a,s):(_.css("left",a),s(a)))}function s(a){void 0===a&&(a=_.position().left),R.scrollTop(0),bb=a||0;var c=0===bb,d=bb==ab,e=a/ab,f=-e*(S-P);(vb!=c||xb!=d)&&(vb=c,xb=d,b.trigger("jsp-arrow-change",[ub,wb,vb,xb])),u(c,d),O.css("left",f),b.trigger("jsp-scroll-x",[-f,c,d]).trigger("scroll")}function t(a,b){N.showArrows&&(hb[a?"addClass":"removeClass"]("jspDisabled"),ib[b?"addClass":"removeClass"]("jspDisabled"))}function u(a,b){N.showArrows&&(nb[a?"addClass":"removeClass"]("jspDisabled"),ob[b?"addClass":"removeClass"]("jspDisabled"))}function v(a,b){var c=a/(T-Q);p(c*Z,b)}function w(a,b){var c=a/(S-P);r(c*ab,b)}function x(b,c,d){var e,f,g,h,i,j,k,l,m,n=0,o=0;try{e=a(b)}catch(p){return}for(f=e.outerHeight(),g=e.outerWidth(),R.scrollTop(0),R.scrollLeft(0);!e.is(".jspPane");)if(n+=e.position().top,o+=e.position().left,e=e.offsetParent(),/^body|html$/i.test(e[0].nodeName))return;h=z(),j=h+Q,h>n||c?l=n-N.horizontalGutter:n+f>j&&(l=n-Q+f+N.horizontalGutter),isNaN(l)||v(l,d),i=y(),k=i+P,i>o||c?m=o-N.horizontalGutter:o+g>k&&(m=o-P+g+N.horizontalGutter),isNaN(m)||w(m,d)}function y(){return-O.position().left}function z(){return-O.position().top}function A(){var a=T-Q;return a>20&&a-z()<10}function B(){var a=S-P;return a>20&&a-y()<10}function C(){R.unbind(zb).bind(zb,function(a,b,c,d){bb||(bb=0),$||($=0);var e=bb,f=$,g=a.deltaFactor||N.mouseWheelSpeed;return tb.scrollBy(c*g,-d*g,!1),e==bb&&f==$})}function D(){R.unbind(zb)}function E(){return!1}function F(){O.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(a){x(a.target,!1)})}function G(){O.find(":input,a").unbind("focus.jsp")}function H(){function c(){var a=bb,b=$;switch(d){case 40:tb.scrollByY(N.keyboardSpeed,!1);break;case 38:tb.scrollByY(-N.keyboardSpeed,!1);break;case 34:case 32:tb.scrollByY(Q*N.scrollPagePercent,!1);break;case 33:tb.scrollByY(-Q*N.scrollPagePercent,!1);break;case 39:tb.scrollByX(N.keyboardSpeed,!1);break;case 37:tb.scrollByX(-N.keyboardSpeed,!1)}return e=a!=bb||b!=$}var d,e,f=[];X&&f.push(jb[0]),W&&f.push(cb[0]),O.focus(function(){b.focus()}),b.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(b){if(b.target===this||f.length&&a(b.target).closest(f).length){var g=bb,h=$;switch(b.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:d=b.keyCode,c();break;case 35:v(T-Q),d=null;break;case 36:v(0),d=null}return e=b.keyCode==d&&g!=bb||h!=$,!e}}).bind("keypress.jsp",function(a){return a.keyCode==d&&c(),!e}),N.hideFocus?(b.css("outline","none"),"hideFocus"in R[0]&&b.attr("hideFocus",!0)):(b.css("outline",""),"hideFocus"in R[0]&&b.attr("hideFocus",!1))}function I(){b.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function J(){if(location.hash&&location.hash.length>1){var b,c,d=escape(location.hash.substr(1));try{b=a("#"+d+', a[name="'+d+'"]')}catch(e){return}b.length&&O.find(d)&&(0===R.scrollTop()?c=setInterval(function(){R.scrollTop()>0&&(x(b,!0),a(document).scrollTop(R.position().top),clearInterval(c))},50):(x(b,!0),a(document).scrollTop(R.position().top)))}}function K(){a(document.body).data("jspHijack")||(a(document.body).data("jspHijack",!0),a(document.body).delegate("a[href*=#]","click",function(b){var c,d,e,f,g,h,i=this.href.substr(0,this.href.indexOf("#")),j=location.href;if(-1!==location.href.indexOf("#")&&(j=location.href.substr(0,location.href.indexOf("#"))),i===j){c=escape(this.href.substr(this.href.indexOf("#")+1));try{d=a("#"+c+', a[name="'+c+'"]')}catch(k){return}d.length&&(e=d.closest(".jspScrollable"),f=e.data("jsp"),f.scrollToElement(d,!0),e[0].scrollIntoView&&(g=a(window).scrollTop(),h=d.offset().top,(g>h||h>g+a(window).height())&&e[0].scrollIntoView()),b.preventDefault())}}))}function L(){var a,b,c,d,e,f=!1;R.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(g){var h=g.originalEvent.touches[0];a=y(),b=z(),c=h.pageX,d=h.pageY,e=!1,f=!0}).bind("touchmove.jsp",function(g){if(f){var h=g.originalEvent.touches[0],i=bb,j=$;return tb.scrollTo(a+c-h.pageX,b+d-h.pageY),e=e||Math.abs(c-h.pageX)>5||Math.abs(d-h.pageY)>5,i==bb&&j==$}}).bind("touchend.jsp",function(){f=!1}).bind("click.jsp-touchclick",function(){return e?(e=!1,!1):void 0})}function M(){var a=z(),c=y();b.removeClass("jspScrollable").unbind(".jsp"),b.replaceWith(yb.append(O.children())),yb.scrollTop(a),yb.scrollLeft(c),pb&&clearInterval(pb)}var N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb=this,ub=!0,vb=!0,wb=!1,xb=!1,yb=b.clone(!1,!1).empty(),zb=a.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===b.css("box-sizing")?(qb=0,rb=0):(qb=b.css("paddingTop")+" "+b.css("paddingRight")+" "+b.css("paddingBottom")+" "+b.css("paddingLeft"),rb=(parseInt(b.css("paddingLeft"),10)||0)+(parseInt(b.css("paddingRight"),10)||0)),a.extend(tb,{reinitialise:function(b){b=a.extend({},N,b),d(b)},scrollToElement:function(a,b,c){x(a,b,c)},scrollTo:function(a,b,c){w(a,c),v(b,c)},scrollToX:function(a,b){w(a,b)},scrollToY:function(a,b){v(a,b)},scrollToPercentX:function(a,b){w(a*(S-P),b)},scrollToPercentY:function(a,b){v(a*(T-Q),b)},scrollBy:function(a,b,c){tb.scrollByX(a,c),tb.scrollByY(b,c)},scrollByX:function(a,b){var c=y()+Math[0>a?"floor":"ceil"](a),d=c/(S-P);r(d*ab,b)},scrollByY:function(a,b){var c=z()+Math[0>a?"floor":"ceil"](a),d=c/(T-Q);p(d*Z,b)},positionDragX:function(a,b){r(a,b)},positionDragY:function(a,b){p(a,b)},animate:function(a,b,c,d){var e={};e[b]=c,a.animate(e,{duration:N.animateDuration,easing:N.animateEase,queue:!1,step:d})},getContentPositionX:function(){return y()},getContentPositionY:function(){return z()},getContentWidth:function(){return S},getContentHeight:function(){return T},getPercentScrolledX:function(){return y()/(S-P)},getPercentScrolledY:function(){return z()/(T-Q)},getIsScrollableH:function(){return X},getIsScrollableV:function(){return W},getContentPane:function(){return O},scrollToBottom:function(a){p(Z,a)},hijackInternalLinks:a.noop,destroy:function(){M()}}),d(c)}return b=a.extend({},a.fn.jScrollPane.defaults,b),a.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){b[this]=b[this]||b.speed}),this.each(function(){var d=a(this),e=d.data("jsp");e?e.reinitialise(b):(a("script",d).filter('[type="text/javascript"],:not([type])').remove(),e=new c(d,b),d.data("jsp",e))})},a.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}});;
